"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5066],{5066:(U,_,c)=>{c.r(_),c.d(_,{MainPageModule:()=>y});var g=c(6895),r=c(4719),e=c(7479),p=c(5012),d=c(5861),n=c(6738),m=c(1228),M=c(6141);function h(o,a){1&o&&(n.TgZ(0,"ion-item"),n._UZ(1,"ion-spinner"),n.qZA())}function x(o,a){if(1&o){const t=n.EpF();n.TgZ(0,"ion-item",9),n.NdJ("click",function(){const s=n.CHM(t).$implicit,l=n.oxw();return n.KtG(l.goto(s))}),n.TgZ(1,"ion-badge",10),n._uU(2),n.qZA(),n.TgZ(3,"ion-grid")(4,"ion-row")(5,"ion-col",11),n._uU(6),n.qZA(),n.TgZ(7,"ion-col",12),n._uU(8),n.qZA(),n.TgZ(9,"ion-col",13),n._uU(10),n.ALo(11,"number"),n.qZA()()(),n.TgZ(12,"ion-badge",14),n._uU(13),n.qZA()()}if(2&o){const t=a.$implicit;n.xp6(1),n.Q6J("color",0==t.type?"primary":"secondary"),n.xp6(1),n.Oqu(t.type_text),n.xp6(4),n.Oqu(t.id),n.xp6(2),n.Oqu(0==t.type?"\u0645\u0646: "+t.from_name:"\u0625\u0644\u0649: "+t.to_name),n.xp6(2),n.Oqu(n.xi3(11,7,t.amount,"1.0-0")),n.xp6(2),n.Q6J("color",t.scolor),n.xp6(1),n.Oqu(t.stext)}}function f(o,a){if(1&o&&(n.TgZ(0,"ion-col",20)(1,"ion-label"),n._uU(2),n.qZA()()),2&o){const t=n.oxw(2);n.xp6(2),n.AsE("\u062a\u0645 \u0627\u0644\u062a\u0623\u0643\u064a\u062f \u0645\u0646 \u0642\u0628\u0644 ",t.p.to_name," \u0628\u062a\u0627\u0631\u064a\u062e ",t.p.to_status_update_at," ")}}function P(o,a){if(1&o&&(n.TgZ(0,"ion-col",20)(1,"ion-label"),n._uU(2),n.qZA()()),2&o){const t=n.oxw(2);n.xp6(2),n.AsE("\u062a\u0645 \u0627\u0644\u0627\u0644\u063a\u0627\u0621 \u0645\u0646 \u0642\u0628\u0644 ",t.p.to_name," \u0628\u062a\u0627\u0631\u064a\u062e ",t.p.to_status_update_at," ")}}function A(o,a){if(1&o&&(n.TgZ(0,"ion-col",20)(1,"ion-label"),n._uU(2),n.qZA()()),2&o){const t=n.oxw(2);n.xp6(2),n.hij("\u062a\u0645 \u0627\u0644\u062a\u0623\u0643\u064a\u062f \u0645\u0646 \u0642\u0628\u0644 \u0627\u0644\u0627\u062f\u0627\u0631\u0629 \u0628\u062a\u0627\u0631\u064a\u062e ",t.p.status_update_at," ")}}function Z(o,a){if(1&o&&(n.TgZ(0,"ion-col",20)(1,"ion-label"),n._uU(2),n.qZA()()),2&o){const t=n.oxw(2);n.xp6(2),n.hij("\u062a\u0645 \u0627\u0644\u0627\u0644\u063a\u0627\u0621 \u0645\u0646 \u0642\u0628\u0644 \u0627\u0644\u0627\u062f\u0627\u0631\u0629 \u0628\u062a\u0627\u0631\u064a\u062e ",t.p.status_update_at," ")}}function O(o,a){1&o&&n._UZ(0,"ion-progress-bar",25)}function C(o,a){if(1&o){const t=n.EpF();n.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col",12)(3,"ion-button",22),n.NdJ("click",function(){n.CHM(t);const u=n.oxw(2);return n.KtG(u.update(u.p))}),n._uU(4,"\u062a\u0623\u0643\u064a\u062f"),n.qZA()(),n.TgZ(5,"ion-col",12)(6,"ion-button",23),n.NdJ("click",function(){n.CHM(t);const u=n.oxw(2);return n.KtG(u.update(u.p,!0))}),n._uU(7,"\u0625\u0644\u063a\u0627\u0621"),n.qZA()(),n.YNc(8,O,1,0,"ion-progress-bar",24),n.qZA()()}if(2&o){const t=n.oxw(2);n.xp6(3),n.Q6J("disabled",t.loading),n.xp6(3),n.Q6J("disabled",t.loading),n.xp6(2),n.Q6J("ngIf",t.loading)}}function b(o,a){if(1&o){const t=n.EpF();n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n._uU(3),n.qZA(),n.TgZ(4,"ion-buttons",15)(5,"ion-button",9),n.NdJ("click",function(){n.CHM(t);const u=n.oxw();return n.KtG(u.setOpen(!1))}),n._uU(6,"\u0639\u0648\u062f\u0629"),n.qZA()()()(),n.TgZ(7,"ion-content",16)(8,"ion-card",17)(9,"ion-grid")(10,"ion-row")(11,"ion-col"),n._uU(12," \u0631\u0642\u0645 \u0627\u0644\u062f\u0641\u0639\u0629: "),n.qZA(),n.TgZ(13,"ion-col")(14,"ion-label"),n._uU(15),n.qZA()()(),n.TgZ(16,"ion-row")(17,"ion-col"),n._uU(18," \u0627\u0644\u062a\u0627\u0631\u064a\u062e: "),n.qZA(),n.TgZ(19,"ion-col")(20,"ion-label"),n._uU(21),n.qZA()()(),n.TgZ(22,"ion-row")(23,"ion-col"),n._uU(24," \u0627\u0644\u0645\u0631\u0633\u0644: "),n.qZA(),n.TgZ(25,"ion-col")(26,"ion-label"),n._uU(27),n.qZA()()(),n.TgZ(28,"ion-row")(29,"ion-col"),n._uU(30," \u0627\u0644\u0645\u0633\u062a\u0644\u0645: "),n.qZA(),n.TgZ(31,"ion-col")(32,"ion-label"),n._uU(33),n.qZA()()(),n.TgZ(34,"ion-row")(35,"ion-col"),n._uU(36," \u0627\u0644\u0642\u064a\u0645\u0629: "),n.qZA(),n.TgZ(37,"ion-col")(38,"ion-label"),n._uU(39),n.qZA()()(),n.TgZ(40,"ion-row")(41,"ion-col"),n._uU(42," \u0627\u0644\u0646\u0648\u0639: "),n.qZA(),n.TgZ(43,"ion-col")(44,"ion-label"),n._uU(45),n.qZA()()(),n.TgZ(46,"ion-row")(47,"ion-col"),n._uU(48," \u0645\u0644\u0627\u062d\u0638\u0627\u062a: "),n.qZA(),n.TgZ(49,"ion-col")(50,"ion-label"),n._uU(51),n.qZA()()(),n.TgZ(52,"ion-card")(53,"ion-row",18)(54,"ion-col",12),n._uU(55," \u0627\u0644\u062d\u0627\u0644\u0629: "),n.qZA(),n.TgZ(56,"ion-col",12)(57,"ion-label"),n._uU(58),n.qZA()()()(),n.TgZ(59,"ion-row")(60,"ion-col",13),n._uU(61," \u062a\u062d\u062f\u064a\u062b\u0627\u062a \u0627\u0644\u062d\u0627\u0644\u0629: "),n.qZA(),n._UZ(62,"ion-col",19),n.TgZ(63,"ion-col",20)(64,"ion-label"),n._uU(65),n.qZA()(),n.YNc(66,f,3,2,"ion-col",21),n.YNc(67,P,3,2,"ion-col",21),n.YNc(68,A,3,1,"ion-col",21),n.YNc(69,Z,3,1,"ion-col",21),n.qZA()()(),n._UZ(70,"br"),n.YNc(71,C,9,3,"ion-grid",4),n.qZA()}if(2&o){const t=n.oxw();n.xp6(3),n.Oqu(t.ptitle),n.xp6(5),n.Q6J("color",t.p.color),n.xp6(7),n.hij(" ",t.p.id,""),n.xp6(6),n.hij(" ",t.p.date,""),n.xp6(6),n.hij(" ",t.p.from_name,""),n.xp6(6),n.hij(" ",t.p.to_name,""),n.xp6(6),n.hij(" ",t.p.amount,""),n.xp6(6),n.hij(" ","s1"==t.p.currency?"\u0628\u0644\u0627\u0633\u062a\u064a\u0643":"\u062e\u064a\u0648\u0637"," "),n.xp6(6),n.hij(" ",t.p.notes," "),n.xp6(7),n.hij(" ",t.p.stext," "),n.xp6(7),n.AsE("\u062a\u0645 \u0627\u0644\u0627\u0646\u0634\u0627\u0621 \u0645\u0646 \u0642\u0628\u0644 ",t.p.from_name," \u0628\u062a\u0627\u0631\u064a\u062e ",t.p.created_at," "),n.xp6(1),n.Q6J("ngIf",1==t.p.status),n.xp6(1),n.Q6J("ngIf",2==t.p.status),n.xp6(1),n.Q6J("ngIf",3==t.p.status),n.xp6(1),n.Q6J("ngIf",4==t.p.status),n.xp6(2),n.Q6J("ngIf",1==t.p.type&&0==t.p.status||t.admin&&1==t.p.status)}}const T=[{path:"",component:(()=>{class o{constructor(t,i,u){this.auth=t,this.api=i,this.toastController=u,this.loading=!1,this.admin=!1,this.payments=[],this.page=1,this.isModalOpen=!1,this.ptitle="",this.search="",2==this.auth.user.role&&(this.admin=!0)}ngOnInit(){this.get_recs(!1,"",this.admin)}get_recs(t,i,u=!1){this.loading=!0,this.api.get_recs(this.auth.user.id,this.page,u,this.search).subscribe(l=>{this.loading=!1,this.payments=this.payments.concat(l),t&&i.target.complete(),this.page++,console.log(this.payments)},l=>{this.loading=!1,console.log(l)})}doInfinite(t){this.get_recs(!0,t,this.admin)}goto(t){this.ptitle="\u062f\u0641\u0639\u0629 \u0631\u0642\u0645: "+t.id,this.p=t,this.isModalOpen=!0,console.log(this.p)}setOpen(t){this.isModalOpen=t}update(t,i=!1){this.loading=!0,this.api.update_status(t.id,i).subscribe(u=>{console.log(u),this.loading=!1,this.updatePy(t.id,u[0]),this.setOpen(!1),this.showMsg("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u062d\u0627\u0644\u0629 \u0628\u0646\u062c\u0627\u062d...")},u=>{this.loading=!1,console.log(u)})}showMsg(t,i=5){var u=this;return(0,d.Z)(function*(){(yield u.toastController.create({message:t,duration:1e3*i,color:"success"})).present()})()}updatePy(t,i){this.payments.find((s,l)=>{if(s.id===t)return this.payments[l].status=i.status,this.payments[l].to_status_update_at=i.to_status_update_at,this.payments[l].status_update_at=i.status_update_at,this.payments[l].stext=i.stext,this.payments[l].scolor=i.scolor,!0})}modalDismiss(t){this.isModalOpen=!1}doSearch(t){this.page=1,this.payments=[],console.log(t.target.value),this.get_recs(!1,"",this.admin)}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(m.e),n.Y36(M.N),n.Y36(e.yF))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-main"]],decls:15,vars:6,consts:[[3,"translucent"],["slot","start"],[3,"fullscreen"],[3,"ngModel","ionChange","ngModelChange"],[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","\u064a\u062a\u0645 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0632\u064a\u062f..."],[3,"isOpen","ionModalDidDismiss"],[3,"click"],["slot","start",2,"margin-inline-end","6px","width","7%",3,"color"],["size","2"],["size","6"],["size","4"],["slot","end",2,"margin-inline-start","6px","width","20%",3,"color"],["slot","end"],[1,"ion-padding"],[3,"color"],[2,"font-weight","bold"],["size","8"],["size","12"],["size","12",4,"ngIf"],["shape","round","expand","full",3,"disabled","click"],["color","danger","shape","round","expand","full",3,"disabled","click"],["type","indeterminate",4,"ngIf"],["type","indeterminate"]],template:function(t,i){1&t&&(n.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),n._UZ(3,"ion-menu-button"),n.qZA(),n.TgZ(4,"ion-title"),n._uU(5,"\u0633\u062c\u0644 \u0627\u0644\u062d\u0631\u0643\u0627\u062a"),n.qZA()()(),n.TgZ(6,"ion-content",2)(7,"ion-list")(8,"ion-searchbar",3),n.NdJ("ionChange",function(s){return i.doSearch(s)})("ngModelChange",function(s){return i.search=s}),n.qZA(),n.YNc(9,h,2,0,"ion-item",4),n.YNc(10,x,14,10,"ion-item",5),n.qZA(),n.TgZ(11,"ion-infinite-scroll",6),n.NdJ("ionInfinite",function(s){return i.doInfinite(s)}),n._UZ(12,"ion-infinite-scroll-content",7),n.qZA(),n.TgZ(13,"ion-modal",8),n.NdJ("ionModalDidDismiss",function(s){return i.modalDismiss(s)}),n.YNc(14,b,72,17,"ng-template"),n.qZA()()),2&t&&(n.Q6J("translucent",!0),n.xp6(6),n.Q6J("fullscreen",!0),n.xp6(2),n.Q6J("ngModel",i.search),n.xp6(1),n.Q6J("ngIf",i.loading),n.xp6(1),n.Q6J("ngForOf",i.payments),n.xp6(3),n.Q6J("isOpen",i.isModalOpen))},dependencies:[g.sg,g.O5,r.JJ,r.On,e.yp,e.YG,e.Sm,e.PM,e.wI,e.W2,e.jY,e.Gu,e.ju,e.MB,e.Ie,e.Q$,e.q_,e.fG,e.ki,e.X7,e.Nd,e.VI,e.PQ,e.sr,e.wd,e.j9,g.JJ],styles:["ion-menu[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: var(--ion-item-background, var(--ion-background-color, #fff))}ion-menu.md[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--padding-top: 20px;--padding-bottom: 20px}ion-menu.md[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:20px 0}ion-menu.md[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{margin-bottom:30px}ion-menu.md[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%], ion-menu.md[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{padding-left:10px}ion-menu.md[_ngcontent-%COMP%]   ion-list#inbox-list[_ngcontent-%COMP%]{border-bottom:1px solid var(--ion-color-step-150, #d7d8da)}ion-menu.md[_ngcontent-%COMP%]   ion-list#inbox-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{font-size:22px;font-weight:600;min-height:20px}ion-menu.md[_ngcontent-%COMP%]   ion-list#labels-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{font-size:16px;margin-bottom:18px;color:#757575;min-height:26px}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px;border-radius:4px}ion-menu.md[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]{--background: rgba(var(--ion-color-primary-rgb), .14)}ion-menu.md[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#616e7e}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:500}ion-menu.ios[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 20px}ion-menu.ios[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:20px 0 0}ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{line-height:24px;margin-bottom:20px}ion-menu.ios[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;--min-height: 50px}ion-menu.ios[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-menu.ios[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#73849a}ion-menu.ios[_ngcontent-%COMP%]   ion-list#labels-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{margin-bottom:8px}ion-menu.ios[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%], ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{margin-bottom:8px}ion-note[_ngcontent-%COMP%]{display:inline-block;font-size:16px;color:var(--ion-color-medium-shade)}ion-item.selected[_ngcontent-%COMP%]{--color: var(--ion-color-primary)}"]}),o})()}];let q=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[p.Bz.forChild(T),p.Bz]}),o})(),y=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[g.ez,r.u5,e.Pc,q]}),o})()}}]);